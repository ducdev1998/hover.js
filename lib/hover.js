// Generated by CoffeeScript 1.4.0
(function() {
  var after, attrEscape, pixelValue;

  attrEscape = function(attr) {
    return attr.replace(/"/g, '%22').replace(/'/g, '%27');
  };

  pixelValue = function(value) {
    return "" + value + "px";
  };

  after = function(ms, cb) {
    return setTimeout(cb, ms);
  };

  this.generateHoverImages = function() {
    $('.hover-image').remove();
    return $('img.hover-zoom').each(function(i) {
      var $this, hoverImageId, largeImgSrc;
      $this = $(this);
      largeImgSrc = $this.data('img-large');
      if (largeImgSrc == null) {
        return;
      }
      hoverImageId = "hover-image-" + i;
      $('body').append("<div id='" + hoverImageId + "' class='hover-image'>\n  <img src='" + (attrEscape(largeImgSrc)) + "' />\n</div>");
      return $this.data('hover-image-el', $("#" + hoverImageId));
    }).mousemove(function(e) {
      var $hoverImage, imageHeight, left, mouseOffset, pageX, pageY, right, windowHeight, windowWidth;
      $hoverImage = $(this).data('hover-image-el');
      pageX = e.pageX, pageY = e.pageY;
      windowHeight = $(window).height();
      windowWidth = $(window).width();
      imageHeight = $hoverImage.outerHeight();
      mouseOffset = 25;
      if ((pageY + imageHeight) > windowHeight) {
        pageY = Math.round((windowHeight - imageHeight) / 2);
      }
      if (pageX > (windowWidth / 2)) {
        right = pixelValue(windowWidth - pageX + mouseOffset);
        left = '';
      } else {
        left = pixelValue(pageX + mouseOffset);
        right = '';
      }
      return $hoverImage.css({
        display: 'block',
        left: left,
        right: right,
        top: pixelValue(pageY)
      });
    }).mouseleave(function() {
      return $(this).data('hover-image-el').css('display', 'none');
    });
  };

  $(function() {
    return generateHoverImages();
  });

}).call(this);
